---
magma_type: Concept
magma_matter_type: Text.Section
magma_section_of: "[[Magma User Guide]]"
created_at: 2023-10-20 09:53:33
tags: [magma-vault]
aliases: []
---
# Generating Complex Artefacts

- add final artefact version of [[Magma User Guide - Creating and Understanding Magma Artefacts]] when done

## Description

Abstract: This section shows how Magma can be used to generate longer texts, such as user guides. It provides a detailed guide on how to use Magma for generating such complex artefacts composed of other artefacts.

Since the generation of longer texts quickly reaches the token limits of an LLM, the generation is somewhat more complicated. Instead of a direct generation of complete texts, these are generated in Magma section by section. With the Magma artefact model introduced in the last chapter the text generation process is modelled as follows: 
  
- Texts (`Magma.Matter.Text`) are another, in this case however complex Magma matter type which is composed of various sections (`Magma.Matter.Text.Section`), a further Magma matter type.  
- The scope of the whole text is described as usual in the concept document, which is used then to come up with a Table of Contents artefact, whose section composition is used to generate the initial concept documents for the sections of the text.
- In the concept documents of the section then the contents is described just like for any other matter. From these descriptions, the generation of parts of various artefacts such as an article, a presentation slide deck or a screencast script is conceivable. Currently, however, only the `Magma.Artefacts.Article` artefact type is implemented in Magma. 
- In the end the final artefact version of the whole is assembled from those of the sections.
  
Let's take a look at the creation of an article step by step.  
  
The initial documents for a new text are created with this Mix task where the first argument is the title of your text, followed by an optional text type:

```sh
$ mix magma.text.new "Example User Guide" UserGuide
```

The text type determines the details of the system prompt of the artefact prompts. 
If no text type is given a minimal generic system prompt is used which can be refined for the users needs. Currently, there is only one text implemented in this early stage of development, the `UserGuide` type.

```markdown
---
magma_type: Concept
magma_matter_type: Text
magma_matter_text_type: UserGuide
created_at: 2023-10-20 08:49:14
tags: [magma-vault]
aliases: []
---
# Example User Guide

## Description

<!--  
What should "Example User Guide" cover?  
-->


# Context knowledge

<!--  
This section should include background knowledge needed for the model to create a proper response, i.e. information it does not know either because of the knowledge cut-off date or unpublished knowledge.  
  
Write it down right here in a subsection or use a transclusion. If applicable, specify source information that the model can use to generate a reference in the response.
-->


# Sections

<!--  
Don't remove or edit this section! The results of the generated table of contents will be copied to this place.  
-->


# Artefact previews

-   [[Example User Guide (article) Preview]]


# Artefacts

## TableOfContents

-   Prompt: [[Prompt for Example User Guide ToC]]
-   Final version: [[Example User Guide ToC]]

### TableOfContents prompt task

Your task is to write an outline of "Example User Guide".

Please provide the outline in the following format:

``markdown
## Title of the first section

Abstract: Abstract of the introduction.

## Title of the next section

Abstract: Abstract of the next section.

## Title of the another section

Abstract: Abstract of the another section.
``

<!--
Please don't change the general structure of this outline format. The section generator relies on an outline with sections.
-->

```

As you can see, there is a description section here as in every concept document. In this section all content that should be included in the text should be roughly outlined. A detailed context knowledge base is also essential in this case.

In the "Artefacts" section we find here only a subsection for the generation of a table of contents (`Magma.Artefacts.TableOfContents` artefact type), which will play an important role in the following, because from the generated table of contents artefact, the concept and artefact prompt documents of the individual sections are generated later. For this it is important that the sections to be generated are specified in the produced artefact version of the table of contents as Markdown sections, which is pointed out by the comment at the end. However, as far as content in these sections is concerned, there are no specific requirements. The content generated by the LLM  in these section is used as the first content of the description of the concept of the respective section. Therefore, the generation of an abstract is requested here. However, the template can also be adapted in this respect if something different or additional is to be generated here. (The explanation of the two new sections that do not exist in the previous concept documents of other artefact follows shortly.)

The artefact prompt of the table of contents, its execution and the generation of the artefact version look the same as in the previous chapters when generating other artefacts.

In the artefact version document of the table of contents, there is now an additional "Assemble sections" button that performs the `Mix.Tasks.Magma.Text.Assemble` mix task:

```sh
mix magma.text.assemble "Example User Guide ToC"
```

Here is what happens then:  
  
- For each section a concept document and an artefact prompt is created for the section of an article. (Remember: `Article` is currently the only artefact type for texts).  
- In the section "Sections" of concept descriptions of the sections are transcluded, so that there is an overview of the description of the contents of the whole article.  
- For all artefact types of texts, currently only 'Article', a preview document is created, which has already been linked to in the concept document of the text in the section "Artefact previews", but which is only created in this step. A preview document is a special Magma document in which the artefact versions of all sections are transcluded and which should fulfill two tasks:  
	- It allows to see a complete representation of the finished article at all times.  
	- It serves as a basis for the final generation of the complete text by resolving the transclusions. This can be done using the "Finalize" button in the preview document or the 'Mix.Tasks.Magma.Text.Finalize':  
	```sh
	mix magma.text.finalize "Example User Guide (article) Preview"
	```

Let's look at example. Let's say we wanted to create an article "Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs" and came up with artefact version to the table of contents like this:

```markdown
---
magma_type: Artefact.Version
magma_artefact: TableOfContents
magma_concept: "[[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs]]"
magma_draft: "[[Generated Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs ToC (2023-10-25T22:31:55)]]"
created_at: 2023-10-25 22:31:33
tags: [magma-vault]
aliases: []
---

``button
name Assemble sections
type command
action Shell commands: Execute: magma.text.assemble
color blue
``


# Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs TOC

## The Hurdles of Handling Voluminous Text

Abstract: Delving into the limitations of chat dialogs when managing extensive textual data. Issues such as scrolling challenges, lack of effective text segmentation, and limited editing capabilities come to the fore.

## Contextual Challenges and Fragmented Conversations

Abstract: Highlighting the issues of maintaining coherence and context in lengthy, intricate discussions within chat interfaces. This includes the frequent need for users to backtrack or reintroduce topics, leading to disjointed conversations.

## Rethinking the Interface

Abstract: Proposing alternative interfaces and modifications to address the identified challenges. From multi-pane designs to advanced organizational tools, a look into potential ways to enhance the experience of crafting complex texts with LLMs.
```

If we hit the "Assemble sections" button, the "Section" section of our text concept document will be filled with this:

```markdown
# Sections

## [[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs - The Hurdles of Handling Voluminous Text|The Hurdles of Handling Voluminous Text]] ![[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs - The Hurdles of Handling Voluminous Text#Description|]]

## [[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs - Contextual Challenges and Fragmented Conversations|Contextual Challenges and Fragmented Conversations]] ![[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs - Contextual Challenges and Fragmented Conversations#Description|]]

## [[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs - Rethinking the Interface|Rethinking the Interface]] ![[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs - Rethinking the Interface#Description|]]
```

This looks quite overwhelming in this raw form, but it will look much cleaner when rendered in Obsidian: while the section titles link to the respective section concept documents, the content of the user written descriptions is transcluded.

The preview document looks very similar but transcludes the artefact versions of the sections instead.

A generated concept document for a section would look like this:

```markdown
---
magma_type: Concept
magma_matter_type: Text.Section
magma_section_of: "[[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs]]"
created_at: 2023-10-25 22:42:35
tags: [magma-vault]
aliases: []
---
# Rethinking the Interface

## Description

Abstract: Proposing alternative interfaces and modifications to address the identified challenges. From multi-pane designs to advanced organizational tools, a look into potential ways to enhance the experience of crafting complex texts with LLMs.


# Context knowledge

<!--
This section should include background knowledge needed for the model to create a proper response, i.e. information it does not know either because of the knowledge cut-off date or unpublished knowledge.

Write it down right here in a subsection or use a transclusion. If applicable, specify source information that the model can use to generate a reference in the response.
-->


# Artefacts

## Article

- Prompt: [[Prompt for Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs - Rethinking the Interface (article section)]]
- Final version: [[Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs - Rethinking the Interface (article section)]]

### Article prompt task

Your task is to write the section "Rethinking the Interface" of "Chat Dialogues and Complexity - The Mismatch in Crafting Elaborate Texts with LLMs".

```

The individual artefact versions of the sections can thus be generated in the following in the usual way: 

1. writing the concepts of each section, i.e.  
	- filling the "Description" section  
	- compiling of the "Context knowledge" (Note: The content of the "Context knowledge" section of the Concept of the text is transcluded in the respective artefact prompt of the section, i.e. only the section-specific "Context knowledge" of the respective section must be specified.) 
1. execute the prompt to generate different prompt results  
2. selection of the best prompt result as basis for the artefact version  
3. editing of the final version, which should now also be reviewed in the preview in the overall context  
  

# Context knowledge

## Magma artefact model ![[Magma artefact model#Description]]

# Artefacts

## Article

- Prompt: [[Prompt for Magma User Guide - Generating Complex Artefacts (article section)]]
- Final version: [[Magma User Guide - Generating Complex Artefacts (article section)]]

### Snippets

Essentially, you should take the text of the following sections and improve the wording. DON'T LEAVING ANYTHING OUT, except the example Magma documents (just replace them with a blank document in your response).

### Article prompt task

Your task is to write the section "Generating Complex Artefacts" of "Magma User Guide". 

![[ExDoc#Admonition blocks]]

![[Prompt snippets#Cover all content]]
